---
paths: ['src/**/*.rs', 'frontend/**']
---

# 開発ルール

## Rust

- 変更対象ファイルを必ず Read してから編集する
- `unwrap()` は本番コードで使わない（`expect()` またはエラーハンドリング）
- `main.rs` の `unwrap()` は起動時フェイルファストとして許容
- 新しい crate 追加時はユーザーに相談する（勝手に追加しない）

## フロントエンド

- 素の HTML/CSS/JS を維持（フレームワーク導入禁止）
- iPad タッチターゲット 48px 以上
- xterm.js 関連は `frontend/vendor/` に配置

## プロセス管理

- `cargo run` でサーバーを起動した場合、作業完了時に必ずプロセスを停止する
- 停止し忘れるとポート占有やディレクトリロックの原因になる

## エスカレーション

- コンパイルエラーは最大3回修正を試みる
- 3回失敗したらユーザーに報告して判断を仰ぐ
